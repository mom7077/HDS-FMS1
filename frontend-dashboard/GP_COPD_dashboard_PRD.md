# 英国 COPD 患者简约型 Dashboard PRD

## 1. 项目背景
- 小组课程作业围绕一位独居的英国 COPD 患者，核心关注他的就医便利性与日常自我管理。
- 患者优先级：离家近、交通方便的 GP 诊所；简洁明了的健康提醒；天气对呼吸的影响提示；清晰的服务质量和费用信息；紧急联系方式带来的安全感。
- 数据均为静态 Excel/CSV，可提前整理成 JSON，无需后端或实时接口。
- 目标是交付一个轻量的单页前端 Dashboard，课堂演示时直接在浏览器打开即可。

## 2. 项目目标
- 以“便利+安心”为主线，呈现最关键的信息模块。
- 以地图+列表为核心，帮助患者快速发现附近 GP，并提供联系/导航入口。
- 保留最必要的健康摘要与天气建议，让患者迅速了解当日风险与提醒。
- 让小组成员能够在短时间内讲清楚整体设计逻辑与数据亮点。

## 3. 目标用户与使用场景
| 用户 | 主要诉求 |
|------|----------|
| COPD 患者（独居） | 按 postcode 找附近 GP、对比质量、获取健康提醒和天气建议、掌握紧急联系方式 |
| 小组成员 | 用简洁界面讲述患者故事、完成课程展示 |
| 任课教师 / 评审 | 评估设计是否贴合患者痛点、数据是否被有效使用、视觉信息是否清晰 |

场景：患者在电脑上打开 Dashboard，输入 postcode 后快速定位附近诊所，查看简短的健康与天气提醒，再决定是否出门或联系 GP。

## 4. 数据概览
- **GP 信息**：名称、postcode、经纬度、评分、COPD 控制率、平均等待时间、费用类型（NHS 免费/私人）。
- **患者摘要**：年龄段、近 7 天活动次数、下次预约时间、当日用药提醒。
- **天气快照**：温度、湿度、空气质量（AQI）、天气类型（晴/雨/雾）。
- 整理方式：将 Excel/CSV 转成 `frontend-dashboard/data/*.json`，统一字段命名（snake_case）。
- 派生指标：距离最近的 GP（可预先计算）、附近 GP 平均评分、性价比标签（示例：质量≥阈值且 NHS 免费判定为“性价比高”）。
- 数据需去标识化，全部展示合成或示例数据。

## 5. 核心功能（含线框）
```
┌────────────────────────────────────────────┐
│ 顶部栏：LOGO | 今日日期 | 患者昵称（A. Smith） │
├────────────────────────────────────────────┤
│ 筛选栏：Postcode 输入 | 距离 5/10/20 km | 质量阈值 | 重置 │
├────────────────────────────────────────────┤
│ KPI 条： [附近可预约 GP 数] [平均评分] [今日提醒] │
├────────────────────────────────────────────┤
│ 核心模块：地图 + 列表                             │
│ ┌───────────────┬──────────────────────────┐     │
│ │ 英国地图 + 气泡 │ 侧边列表：最近 Top3 GP         │     │
│ │ （颜色=评分     │  - 名称/评分/距离/费用标签     │     │
│ │  大小=患者量）  │  - 按钮：拨打电话/打开导航     │     │
│ │ 点击 = 弹窗卡片 │                              │     │
│ └───────────────┴──────────────────────────┘     │
├────────────────────────────────────────────┤
│ 我的健康摘要：迷你趋势线 + 下次预约 + 用药提醒         │
├────────────────────────────────────────────┤
│ 今日环境提示卡：天气图标 + 数据（温/湿/AQI）+ 建议文案 │
├────────────────────────────────────────────┤
│ 页脚：NHS 111 / 999 | 数据来源 | 免责声明             │
└────────────────────────────────────────────┘
```

### 5.1 筛选与交互
- Postcode 输入框，简单格式校验（例如 `SW1A 1AA`）。
- 距离下拉框（5 km / 10 km / 20 km），默认选 10 km。
- 服务质量阈值（例如“仅显示评分 ≥ 4 的 GP”），可用滑块或切换按钮。
- “重置”按钮可恢复默认视图。

### 5.2 地图与列表
- 使用英国地图底图，加载 GP 坐标点。
- 气泡颜色表示评分等级（绿色高、橙色中、红色偏低），大小表示患者量或权重。
- 点击气泡打开详情卡片：地址、评分、COPD 控制率、等待时间、费用类型、联系电话（`tel:` 链接）、导航按钮（占位链接）。
- 侧边列表实时显示距离最近的 3 个 GP，展示简要信息与“联系/导航”按钮。
- “查看全部”链接可让视图聚焦地图区域。

### 5.3 KPI 条
- KPI 1：当前筛选条件下可预约 GP 总数。
- KPI 2：筛选结果的平均评分。
- KPI 3：今日健康提醒，例如“20:00 使用雾化器”。
- KPI 数值与筛选条件联动。

### 5.4 我的健康摘要
- 迷你趋势线（sparkline）展示最近 7 天的活动次数/步数。
- 卡片显示下次预约时间地点。
- 用药提醒状态（已完成/待完成）。
- 若有空档可加一句提示：“每周活动次数 3 次，继续保持！”。

### 5.5 环境提示卡
- 展示今日温度、湿度、AQI、天气类型图标。
- 根据阈值生成一句健康建议，例如：“AQI 偏高，建议减少长时间户外活动”或“气温较低，外出记得保暖”。
- 默认展示预置数据；后续可扩展为实时天气接口刷新温/湿/AQI/建议文案（含请求状态提示与失败兜底）。
- 天气数据来自 `data/weather_lookup.json` 的 postcode 前缀查找，若无匹配则回退到默认天气。

### 5.6 页脚
- NHS 111 与 999 紧急联系方式按钮或链接。
- 数据来源列表（NHS Digital、Met Office 等）。
- 免责声明：示例数据仅用于学习展示，非医疗建议。

## 6. 非功能需求
- 优先适配桌面端（≥1280px），如时间允许再做简单响应式。
- 本地加载时间控制在 3 秒以内，地图与图表交互流畅。
- 核心医疗数据离线可用；天气模块当前使用预置数据（后续可接入 serverless 代理实时更新）。
- 颜色与对比度符合基本可读性标准，图标提供可替代文本。

## 7. 技术实现
- HTML + CSS + 原生 JavaScript（可视化逻辑按模块划分）。
- 地图和图表：优先考虑 ECharts；若过重，也可选 Leaflet（地图）+ 轻量折线库（例如 Chart.js）。
- 样式：自定义 CSS，使用 CSS 变量统一颜色（主色：深蓝 / 强调色：青绿 / 警示色：琥珀）。
- 数据：从 `data/*.json` 使用 `fetch` 加载（核心静态数据）；天气通过 `postcodes.io` + `/api/weather` serverless 代理实时获取。
- 目录结构：
  ```
  frontend-dashboard/
    ├── index.html
    ├── assets/
    │   └── css/styles.css
    ├── data/
    │   ├── dashboard-data.js       # build_dashboard_data.py 生成的静态数据
    │   └── weather_lookup.json     # 预置天气查找表（postcode 前缀 → 天气）
    ├── js/
    │   ├── main.js
    │   ├── map.js
    │   └── utils.js
    └── scripts/
        └── build_dashboard_data.py # 数据预处理脚本
  ```

## 8. 开发计划
| 时间 | 主要任务 |
|------|----------|
| Day 0 | 确认 PRD，确定配色与字体 |
| Day 1 | 整理/模拟 JSON 数据 |
| Day 1-2 | 搭建整体页面结构与样式（头部、筛选、KPI、模块容器） |
| Day 2 | 完成地图与侧边列表交互 |
| Day 3 | 实现健康摘要、环境提示卡片 |
| Day 3 | 校对文案、检查浏览器兼容并打包交付 |

## 9. 验收标准
- 地图+列表模块可展示至少 3 家 GP，并支持点击查看详情。
- 筛选栏能够影响地图/列表/KPI 的显示（基于模拟逻辑）。
- “我的健康摘要”与“环境提示”显示示例数据且文案合理。
- 页脚包含紧急联系方式和数据来源说明。
- 页面在 Chrome / Edge 最新版中可直接打开，无报错。

## 10. 风险与对策
| 风险 | 影响 | 对策 |
|------|------|------|
| 地图库引入体积较大 | 首屏加载慢 | 精简 GeoJSON，仅保留英国轮廓；必要时换 Leaflet 静态底图 |
| 距离计算误差 | 最近 GP 排序不准确 | 在数据预处理阶段计算距离并固定值，前端只做筛选 |
| 时间不足以做响应式 | 移动端展示欠佳 | 明确桌面优先；移动端做简单纵向堆叠或留待后续 |
- | - | 若未来启用实时天气，再增加相关风险及对策 |
| 示例数据不一致 | 影响展示可信度 | 统一整理 mock 数据，提前核对文案与数值匹配 |

## 11. 下一步
1. 组内审阅该 PRD 与线框，若有修改需求尽快反馈。
2. 确定最终配色、字体、图标风格。
3. 准备 JSON 数据文件，与 PRD 对应字段保持一致。
4. 按计划开始前端开发与调试。

---
确认内容无误后，即可进入页面实现阶段；后续若有调整，再在此基础上微调并最终在交付前转换为英文版本。
